Раздел I. Теоретические аспекты математического моделирования

УДК 519.86 А.И. Сухинов, В.К. Гадельшин, Д.С. Любомищенко ТЕОРЕТИЧЕСКИЕ И ПРАКТИЧЕСКИЕ ОЦЕНКИ ЭФФЕКТИВНОСТИ ПАРАЛЛЕЛЬНОЙ РЕАЛИЗАЦИЙ МЕТОДА СТОУНА В работе приведены теоретические и практические оценки эффективности параллельной версии алгоритма неполного LU-разложения Стоуна (SIP) для суперпроизводительной вычислительной системы. В качестве базового подхода распараллеливания используется метод декомпозиции области моделирования на подобласти (domain decomposi- tion). В рамках данного подхода рассматриваются: двумерная декомпозиция по данным без учета общего волнового фронта; двумерная декомпозиция по данным с учетом общего волнового фронта; одномерная декомпозиция по данным с учетом общего волнового фронта и пакетной организацией обменов. Показано, что для задачи приземной аэродинамики наилучшие результаты из трех оцениваемых параллельных версий дает алгоритм одномерной декомпозиции c учетом общего волнового фронта. Приведены оценки оптимального размера пакета передачи. Метод Стоуна; оценки эффективности для системы с массовым параллелизмом. Для решения задач атмосферного моделирования очень важным аспектом является выбор параллельного алгоритма. Процесс построения параллельной программы не всегда может быть ограничен простой переделкой последовательных линейных конструкций в параллельное представление. Такой подход может дать параллельный аналог алгоритма, который при масштабировании на большое коли-

Известия ЮФУ. Технические науки Тематический выпуск

чество узлов параллельной вычислительной системы будет давать незначительное преимущество или не давать преимуществ вовсе по сравнению с последовательным алгоритмом, если учесть трудозатраты на разработку параллельной версии. Также стоит отметить, что многие параллельные алгоритмы вовсе не имеют последовательных аналогов, что существенно усложняет их разработку и отладку. Поэтому перед началом создания программного средства для многопроцессорной вычислительной системы необходимо произвести теоретические оценки эффективности. Анализ производительности параллельных алгоритмов чаще всего проводят с использованием понятий ускорения и эффективности, определяемых соответственно по формулам tot nT где sT – время выполнения лучшего последовательного алгоритма, T – время выполнения параллельного алгоритма на n процессорах. Получим теоретические оценки эффективности параллельных реализаций метода SIP с учетом основных параметров параллельной вычислительной системы. В ТТИ ЮФУ установлен HPC-кластер, представляющий собой систему с распределенной памятью из 128 узлов, объединенных сетью InfiniBand. Каждый узел кластера является системой с общей памятью (SMP-системой) с 16-ю вычислителями и объемом ОЗУ 32 Гбайт. Фактическая пропускная способность и латентность сети Infiniband для узлов в разных корзинах (худший случай):  латентность: с;  среднее время одной операции с плавающей точкой: с;  cреднее время пересылки одного элемента массива: с;  пропускная способность: 1224,38 Гбайт/с;  пиковая производительность одного вычислительного ядра узла кластера: 9,2 ГФлопс. В работе рассматривается одномерная и двумерная топологии процессоров. Количество процессоров в параллельной вычислительной системе равно p . Для двумерной топологии , где p и yp равны количеству процессоров соответственно в направлениях x и y . Для определенности будем считать, что область моделирования имеет квадратное основание и одинаковое количество контрольных объемов (КО) N в горизонтальных направлениях и N – количество КО в вертикальном направлении. Подсчитаем время sT работы одной итерации последовательного алгоритма SIP. Это время получается суммированием временных затрат на каждый из этапов алгоритма, т.е. декомпозицию, прямую подстановку, обратную подстановку: dec frw bkw

Раздел I. Теоретические аспекты математического моделирования

dec N N  frw N N  bkw N N  N N  Подсчитаем время T работы одной итерации параллельного алгоритма без учета общего волнового фронта. Это время складывается из времен, необходимых на осуществление трех этапов алгоритма SIP, и времени на синхронизацию данных на границе: где dec frw bkw N N  Время синхронизации равно lat где lat – время, необходимое на организацию обмена; – время на пересылку. Процесс синхронизации проходит вначале в направлении x , а затем в направлении y двумерной топологии. Рассмотрим направление x , а для направления y процессы обменов протекают аналогично. Синхронизация в направлении x протекает в два этапа: сначала осуществляются обмены нечетных и четных узлов, затем четных и нечетных. На каждом этапе тратится время на организацию двух обменов 2 lat и двух пересылок двух плоскостей данных синхронизации N N . Таким образом, на синхронизацию в направлении x затрачивается время 2 2 lat N N а в направлении y – время 2 2 lat N N Тогда общее время синхронизации равно lat N N N N Время работы одной итерации алгоритма двумерной декомпозиции без учета общего волнового фронта равно lat N N N N

Известия ЮФУ. Технические науки Тематический выпуск

Время работы алгоритма с учетом волнового фронта так же как и в последовательном случае складывается из временных затрат на три этапа алгоритма SIP: dec frw bkw Каждый из этапов проходит  -стадий и на  стадиях требуется осуществлять синхронизационные обмены. Таким образом: dec dec dec frw frw frw bkw bkw bkw Времена, необходимые на осуществление процесса расчета для этапов декомпозиции, прямой и обратной подстановок, запишутся соответственно как dec N N frw N N bkw N N На этапе декомпозиции и прямой подстановки необходимо передавать одну плоскость синхронизационных данных в каждом направлении, а на этапе обратной подстановки – две плоскости в каждом направлении. Как и прежде, время синхронизации по каждому направлению складывается из времени на организацию соединения и времени на передачу данных. Таким образом, времена синхронизации равны dec frw lat N N N N bkw lat N N N N В итоге время работы алгоритма волнового фронта на p -процессорах имеет вид N N

lat N N

Раздел I. Теоретические аспекты математического моделирования

Рассмотрим алгоритм одномерной декомпозиции по данным с учетом общего волнового фронта и пакетной организацией обменов. Время работы алгоритма, как и в случае двумерной декомпозиции с учетом общего волнового фронта, имеет вид dec frw bkw где dec dec dec frw frw frw bkw bkw bkw Пусть m – количество пакетов синхронизации для каждого вычислителя, тогда времена, необходимые на осуществление процесса расчета для этапов декомпозиции, прямой и обратной подстановок, запишутся соответственно как dec N N p m N N p m N N p m Так как декомпозиция осуществляется по одному направлению, то и синхронизация проходит только в одном направлении. Времена синхронизации для трех этапов равны dec frw lat bkw lat Время на осуществление одной операции: lat N N p m Запишем формулы для теоретических оценок эффективности алгоритмов [5,6]: lat N N pT N N p p N N

Известия ЮФУ. Техническ

N N p p ⎢ ⎢⎣ N N p m ⎡ ⎢⎣ Построим графики те xp Из результатов теоре алгоритм двумерной деком можно применять только на без учета общего волновог ность, однако в теоретичес ную способность сети мног естественным ограничителе нового фронта сходимость жена за счет отсутствия нео обратной подстановки. Одн двумерным алгоритмом вол издержек на передачу синх разным является реализаци учета волнового фронта и кетной передачей сообщени ие науки Тематический вып pT lat N N N N ⎟⎥ ⎠⎦ pT lat N N ⎟⎥ ⎠⎦ оретических оценок эффективности с учетом того, yp

тических оценок эффективности параллельных вер алгоритма SIP тических оценок эффективности становится ясно, мпозиции по данным с учетом общего волнового фро а небольшом (<16) количестве вычислителей. Алгор го фронта дает отличную асимптотическую эффек ских оценках не было учтено ограничение на проп гопроцессорной системы, которое на практике явля ем алгоритма. Также в алгоритме без учета общего итерационного процесса может быть существенно обходимых обменов на этапах декомпозиции, прямо номерная декомпозиция дает выигрыш по сравнени лнового фронта за счет сокращения в 2 раза времен хронизационных данных на границе. Поэтому целес ия алгоритма двумерной декомпозиции по данным алгоритма одномерной декомпозиции по данным с ий. пуск что сий что онта ритм ктивпускяется волсниой и ию с нных ообм без с па-

Раздел I. Т

Найдем оптимальное мерной декомпозиции при но минимизировать время T lat ⎢⎣ Нетрудно видеть, что В результате для p  низации необходимо осуще сором. В табл. 1 приведены в сти алгоритмов. Время выпол Количество процессоров Теоретические аспекты математического моделирова значение параметра разбиения m в алгоритме од заданном количестве вычислителей .p Для этого н lat N N N N

минимум достигается при lat N N оптимальное значение , т.е. процесс син ествлять после обработки шести строк каждым про временные затраты и практические замеры эффекти Табли лнения одной итерации и эффективность Время , с.

(прерывистая) и практическая (сплошная) кривые эффективности ания днонужхрооцесвноица 1

Известия ЮФУ. Технические науки Тематический выпуск

Как и ожидалось, результаты практических замеров показали существенное ских оценках не учитываются ограничения на пропускную способность сети, время на выделение, удаление и доступа к памяти массивов. БИБЛИОГРАФИЧЕСКИЙ СПИСОК 1. Сухинов А.И., Гадельшин В.К., Любомищенко Д.С. Математическое моделирование поля ветровых течений в условиях городской застройки с применением SIP-метода // Известия ЮФУ. Технические науки. – 2009. – № 8 (97). – С. 30-37. 2. Сухинов А.И., Гадельшин В.К., Любомищенко Д.С. Математическая модель распространения вредных выбросов от автотранспортных средств на основе метода контрольного объема и ее параллельная реализация на кластере распределенных вычислений // Известия ЮФУ. Технические науки. – 2009. – № 2 (91). – С. 8-14. 5. Гергель В.П. Теория и практика параллельных вычислений: Учебное пособие. – М.: Интернет-Университет Информационных Технологий; БИНОМ. Лаборатория знаний, 6. Корнеев В.В. Параллельные вычислительные системы. – М.: Ноледж, 1999. – 320 с. 7. Параллельная версия алгоритма неполного LU -разложения Стоуна [Электронный Электрон. дан. Режим доступа: http://eprints.ecs.soton.ac.uk/7614/, свободный. Дата доступа: 25.10.2010. Загл. с экрана. – Яз. англ. 8. Сухинов А.И. Двумерные схемы расщепления и некоторые их приложения. – М.: МАКС Пресс, 2005. – 408 с. Статью рекомендовал к опубликованию д.т.н., профессор Н.Н. Чернов. Сухинов Александр Иванович Технологический институт федерального государственного автономного образовательного учреждения высшего профессионального образования «Южный федеральный университет» в г. Таганроге. 347928, г. Таганрог, пер. Некрасовский, 44. Руководитель ТТИ ЮФУ; д.ф.-м.н.; профессор. Гадельшин Валерий Камельянович Кафедра высшей математики; к.т.н.; доцент. Любомищенко Денис Сергеевич Кафедра высшей математики; ассистент.

Раздел I. Теоретические аспекты математического моделирования